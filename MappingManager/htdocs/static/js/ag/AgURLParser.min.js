var AgURLParser={newCommon:function(){return{Model:DEF_MODEL,Version:DEF_VERSION,AnatomogramVersion:"20110318",ScalarMaximum:65535,ScalarMinimum:-65535,ColorbarFlag:false,ScalarColorFlag:false,TreeName:DEF_TREE,DateTime:null,CoordinateSystemName:"bp3d",CopyrightType:null}},parseCommon:function(param){var Common;for(var c_key in param){if(!Common){Common=AgURLParser.newCommon()}var c_val=param[c_key];if(c_key=="av"){delete param[c_key]}else{if(c_key=="sx"){Common.ScalarMaximum=Number(c_val);delete param[c_key]}else{if(c_key=="sn"){Common.ScalarMinimum=Number(c_val);delete param[c_key]}else{if(c_key=="cf"){if(c_val=="0"||c_val=="false"){Common.ColorbarFlag=false}else{Common.ColorbarFlag=true}delete param[c_key]}else{if(c_key=="hf"){if(c_val=="0"||c_val=="false"){Common.ScalarColorFlag=false}else{Common.ScalarColorFlag=true}delete param[c_key]}else{if(c_key=="tn"){if(c_val=="isa"){Common.TreeName=c_val}else{if(c_val=="partof"){Common.TreeName=c_val}}delete param[c_key]}else{if(c_key=="model"){Common.Model=c_val;delete param[c_key]}else{if(c_key=="bv"){Common.Version=c_val;delete param[c_key]}else{if(c_key=="dt"){Common.DateTime=c_val;delete param[c_key]}else{if(c_key=="crd"){Common.CoordinateSystemName=c_val;delete param[c_key]}else{if(c_key=="cprt"){Common.CopyrightType=c_val;delete param[c_key]}else{if(c_key=="dp"){if(param.dp!="0"&&param.dp!="false"){Common.PinDescriptionDrawFlag=true}delete param[c_key]}else{if(c_key=="dpl"){Common.PinIndicationLineDrawFlag=Number(c_val);delete param[c_key]}else{if(c_key=="dpod"){if(param.dpod!="0"&&param.dpod!="false"){Common.PointDescriptionDrawFlag=true}delete param[c_key]}else{if(c_key=="dpol"){Common.PointIndicationLineDrawFlag=Number(c_val);delete param[c_key]}}}}}}}}}}}}}}}}return Common},newWindow:function(){return{ImageWidth:500,ImageHeight:500,BackgroundColor:"FFFFFF",BackgroundOpacity:100,GridFlag:false,GridTickInterval:100,GridColor:"00FF00"}},parseWindow:function(param){var Window;for(var c_key in param){if(!Window){Window=AgURLParser.newWindow()}var c_val=param[c_key];if(c_key=="iw"){Window.ImageWidth=Number(c_val);delete param[c_key]}else{if(c_key=="ih"){Window.ImageHeight=Number(c_val);delete param[c_key]}else{if(c_key=="bcl"){Window.BackgroundColor=(new String(c_val)).toUpperCase();delete param[c_key]}else{if(c_key=="bga"){Window.BackgroundOpacity=Number(c_val);delete param[c_key]}else{if(c_key=="gdr"){if(c_val=="0"||c_val=="false"){Window.GridFlag=false}else{Window.GridFlag=true}delete param[c_key]}else{if(c_key=="gtc"){Window.GridTickInterval=Number(c_val);delete param[c_key]}else{if(c_key=="gcl"){Window.GridColor=(new String(c_val)).toUpperCase();delete param[c_key]}}}}}}}}return Window},newCamera:function(){return{CameraMode:"camera",CameraX:2.7979888916016167,CameraY:-998.4280435445771,CameraZ:809.7306805551052,TargetX:2.7979888916015625,TargetY:-110.37168800830841,TargetZ:809.7306805551052,CameraUpVectorX:0,CameraUpVectorY:0,CameraUpVectorZ:1,Zoom:0,AddLatitudeDegree:0,AddLongitudeDegree:0}},parseCamera:function(param){var Camera;for(var c_key in param){if(!Camera){Camera=AgURLParser.newCamera()}var c_val=param[c_key];if(c_key=="cx"){Camera.CameraX=Number(c_val);delete param[c_key]}else{if(c_key=="cy"){Camera.CameraY=Number(c_val);delete param[c_key]}else{if(c_key=="cz"){Camera.CameraZ=Number(c_val);delete param[c_key]}else{if(c_key=="tx"){Camera.TargetX=Number(c_val);delete param[c_key]}else{if(c_key=="ty"){Camera.TargetY=Number(c_val);delete param[c_key]}else{if(c_key=="tz"){Camera.TargetZ=Number(c_val);delete param[c_key]}else{if(c_key=="ux"){Camera.CameraUpVectorX=Number(c_val);delete param[c_key]}else{if(c_key=="uy"){Camera.CameraUpVectorY=Number(c_val);delete param[c_key]}else{if(c_key=="uz"){Camera.CameraUpVectorZ=Number(c_val);delete param[c_key]}else{if(c_key=="zm"){Camera.Zoom=Number(c_val)*5;delete param[c_key]}else{if(c_key=="cameraMode"){Camera.CameraMode=c_val;delete param[c_key]}else{if(c_key=="addLongitude"){Camera.AddLongitudeDegree=Number(c_val);delete param[c_key]}else{if(c_key=="addLatitude"){Camera.AddLatitudeDegree=Number(c_val);delete param[c_key]}}}}}}}}}}}}}}return Camera},newPart:function(){return{PartModel:null,PartVersion:null,PartID:null,PartName:null,PartColor:"FFFFFF",PartScalar:null,PartScalarFlag:false,PartOpacity:1,PartRepresentation:"surface",UseForBoundingBoxFlag:true,PartDeleteFlag:false}},parsePart:function(param){var Part=[];var UseForBoundingBoxFlag;for(var i=1;;i++){var id=Ext.String.leftPad(i,3,"0");if(!param["oid"+id]&&!param["onm"+id]){break}var PartItem=AgURLParser.newPart();var keynum=0;for(var c_key in param){var c_val=param[c_key];if(c_key=="oid"+id){PartItem.PartID=c_val;delete param[c_key];keynum++}else{if(c_key=="onm"+id){PartItem.PartName=c_val;delete param[c_key];keynum++}else{if(c_key=="ocl"+id){PartItem.PartColor=(new String(c_val)).toUpperCase();delete param[c_key];keynum++}else{if(c_key=="osc"+id){PartItem.PartScalar=Number(c_val);PartItem.PartScalarFlag=true;PartItem.ScalarColorFlag=true;delete param[c_key];keynum++}else{if(c_key=="osz"+id){if(c_val=="H"){PartItem.PartDeleteFlag=true}else{if(c_val=="Z"){PartItem.UseForBoundingBoxFlag=true;UseForBoundingBoxFlag=true}}delete param[c_key];keynum++}else{if(c_key=="oop"+id){PartItem.PartOpacity=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="orp"+id){if(c_val=="W"){PartItem.PartRepresentation="wireframe"}else{if(c_val=="P"){PartItem.PartRepresentation="points"}else{PartItem.PartRepresentation="surface"}}delete param[c_key];keynum++}else{if(c_key=="odcp"+id){if(c_val!="0"&&c_val!="false"){PartItem.PartDrawChildPoint=true}delete param[c_key];keynum++}}}}}}}}}if(keynum>0){Part.push(PartItem)}}if(UseForBoundingBoxFlag){for(var i in Part){var PartItem=Part[i];if(!PartItem.UseForBoundingBoxFlag){PartItem.UseForBoundingBoxFlag=false}}}return(Part.length>0?Part:undefined)},newLegend:function(){return{DrawLegendFlag:false,LegendPosition:"UL",LegendColor:"000000",LegendTitle:null,Legend:null,LegendAuthor:null}},parseLegend:function(param){var Legend=AgURLParser.newLegend();var keynum=0;for(var c_key in param){var c_val=param[c_key];if(c_key=="dl"){if(c_val!="0"&&c_val!="false"){Legend.DrawLegendFlag=true}delete param[c_key];keynum++}else{if(c_key=="lp"){Legend.LegendPosition=c_val;delete param[c_key];keynum++}else{if(c_key=="lc"){Legend.LegendColor=(new String(c_val)).toUpperCase();delete param[c_key];keynum++}else{if(c_key=="lt"){Legend.LegendTitle=c_val;delete param[c_key];keynum++}else{if(c_key=="le"){Legend.Legend=c_val;delete param[c_key];keynum++}else{if(c_key=="la"){Legend.LegendAuthor=c_val;delete param[c_key];keynum++}}}}}}}return keynum>0?Legend:undefined},newPin:function(){return{PinPartID:null,PinX:0,PinY:0,PinZ:0,PinArrowVectorX:0,PinArrowVectorY:0,PinArrowVectorZ:0,PinUpVectorX:0,PinUpVectorY:0,PinUpVectorZ:0,PinDescription:null,PinDescriptionDrawFlag:false,PinDescriptionColor:"FFFFFF",PinIndicationLineDrawFlag:0,PinColor:"FFFFFF",PinShape:null,PinOrganID:null,PinOrganName:null,PinOrganGroup:null,PinOrganGrouppath:null,PinOrganPath:null,PinCoordinateSystemName:"bp3d"}},parsePin:function(param){var Pin=[];for(var i=1;;i++){var id=Ext.String.leftPad(i,3,"0");if(!param["pno"+id]){break}var PinItem=AgURLParser.newPin();var keynum=0;for(var c_key in param){var c_val=param[c_key];if(c_key=="pno"+id){PinItem.PinPartNo=c_val;PinItem.PinID=c_val;delete param[c_key];keynum++}else{if(c_key=="px"+id){PinItem.PinX=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="py"+id){PinItem.PinY=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="pz"+id){PinItem.PinZ=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="pax"+id){PinItem.PinArrowVectorX=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="pay"+id){PinItem.PinArrowVectorY=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="paz"+id){PinItem.PinArrowVectorZ=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="pux"+id){PinItem.PinUpVectorX=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="puy"+id){PinItem.PinUpVectorY=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="puz"+id){PinItem.PinUpVectorZ=Number(c_val);delete param[c_key];keynum++}else{if(c_key=="pcl"+id){PinItem.PinColor=(new String(c_val)).toUpperCase();delete param[c_key];keynum++}else{if(c_key=="pd"+id){PinItem.PinDescription=c_val;delete param[c_key];keynum++}else{if(c_key=="pdc"+id){PinItem.PinDescriptionColor=(new String(c_val)).toUpperCase();delete param[c_key];keynum++}else{if(c_key=="pdd"+id){if(c_val!="0"&&c_val!="false"){PinItem.PinDescriptionDrawFlag=true}delete param[c_key];keynum++}else{if(c_key=="poi"+id){PinItem.PinOrganID=c_val;delete param[c_key];keynum++}else{if(c_key=="pon"+id){PinItem.PinOrganName=c_val;delete param[c_key];keynum++}else{if(c_key=="ps"+id){if(c_val=="CC"){PinItem.PinShape="CONE"}else{if(c_val=="PS"){PinItem.PinShape="PIN";PinItem.PinSize=10}else{if(c_val=="PM"){PinItem.PinShape="PIN_MIDIUM";PinItem.PinSize=15}else{if(c_val=="PL"){PinItem.PinShape="PIN_LONG";PinItem.PinSize=20}else{if(c_val=="SC"){PinItem.PinShape="CIRCLE";PinItem.PinSize=10}}}}}delete param[c_key];keynum++}else{if(c_key=="pcd"+id){PinItem.PinCoordinateSystemName=c_val;delete param[c_key];keynum++}}}}}}}}}}}}}}}}}}}if(keynum>0){Pin.push(PinItem)}}return(Pin.length>0?Pin:undefined)},newExtensionPartGroup:function(){return{PartGroupId:null,PartGroupName:null,PartGroupPath:null,PartGroupItems:[]}},newExtensionPart:function(){return{PartId:null,PartName:null,PartColor:"FFFFFF",PartScalar:0,PartScalarFlag:false,PartOpacity:1,PartRepresentation:"surface",UseForBoundingBoxFlag:true,PartDeleteFlag:false,PartPath:null}},parseURL:function(str){var jsonObj=null;var decode_str;try{decode_str=decodeURIComponent(str)}catch(e){decode_str=str}try{jsonObj=Ext.JSON.decode(decode_str,true)}catch(e){}if(!jsonObj){var urlObj=Ext.Object.fromQueryString(decode_str);if(urlObj){var Window=AgURLParser.parseWindow(urlObj);var Part=AgURLParser.parsePart(urlObj);if(Window||Part){var Common=AgURLParser.parseCommon(urlObj);var Camera=AgURLParser.parseCamera(urlObj);var Legend=AgURLParser.parseLegend(urlObj);var Pin=AgURLParser.parsePin(urlObj);jsonObj={};if(Common){jsonObj.Common=Common}if(Window){jsonObj.Window=Window}if(Camera){jsonObj.Camera=Camera}if(Legend){jsonObj.Legend=Legend}if(Pin){jsonObj.Pin=Pin}if(Part){jsonObj.Part=Part}}}}return jsonObj}};