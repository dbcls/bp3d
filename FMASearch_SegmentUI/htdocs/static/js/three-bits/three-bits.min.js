THREE.Vector3.prototype.isZero=function(v){return this.lengthSq()<(v!==undefined?v:0.0001)};THREE.Vector3.prototype.addSelf=function(v){this.x+=v.x;this.y+=v.y;this.z+=v.z;return this};THREE.Vector3.prototype.subSelf=function(v){this.x-=v.x;this.y-=v.y;this.z-=v.z;return this};THREE.PinHelper=function(dir,origin,length,color,headLength,headWidth,headColor){THREE.Object3D.call(this);this.type="PinHelper";this.headRate=5;if(color===undefined){color=255}if(length===undefined){length=112.5}if(headLength===undefined){headLength=length/this.headRate}if(headWidth===undefined){headWidth=length/this.headRate}if(headColor===undefined){headColor=11776947}this.lineHeight=1.2;var lineGeometry=new THREE.CylinderBufferGeometry(3,0.1,this.lineHeight,72,1);lineGeometry.translate(0,this.lineHeight/2,0);var coneRadius=0.7;var coneGeometry=new THREE.SphereBufferGeometry(coneRadius);coneGeometry.translate(0,-coneRadius,0);this.length=length;this.headLength=headLength;this.headWidth=headWidth;this.headScale=this.length/112.5;this.position.copy(origin);this.line=new THREE.Mesh(lineGeometry,new THREE.MeshStandardMaterial({color:headColor}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new THREE.Mesh(coneGeometry,new THREE.MeshStandardMaterial({color:color}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(dir);this.setLength()};THREE.PinHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.PinHelper.prototype.constructor=THREE.PinHelper;THREE.PinHelper.prototype.setDirection=(function(){var axis=new THREE.Vector3();var radians;return function setDirection(dir){if(dir.y>0.99999){this.quaternion.set(0,0,0,1)}else{if(dir.y<-0.99999){this.quaternion.set(1,0,0,0)}else{axis.set(dir.z,0,-dir.x).normalize();radians=Math.acos(dir.y);this.quaternion.setFromAxisAngle(axis,radians)}}}}());THREE.PinHelper.prototype.setLength=function(length,headLength,headWidth,scale){if(length===undefined){length=this.length}if(headLength===undefined){headLength=length/this.headRate}if(headWidth===undefined){headWidth=length/this.headRate}if(scale===undefined){scale=1}this.line.scale.set(scale,Math.max(0.1,length-headLength),scale);this.line.updateMatrix();this.cone.scale.set(headWidth,headLength,headWidth);this.cone.position.y=length*this.lineHeight;this.cone.updateMatrix()};THREE.PinHelper.prototype.setScale=function(scale){if(scale===undefined){scale=1}this.setLength(this.length*scale,this.headLength*scale*this.headScale,this.headWidth*scale*this.headScale,scale)};THREE.PinHelper.prototype.setColor=function(color){this.cone.material.color.copy(color)};THREE.PinHelper.prototype.setSize=function(length){this.length=length;this.headScale=this.length/112.5};THREE.LargePinHelper=function(dir,origin,color,length){if(length===undefined){length=112.5}this.length=length;this.headLength=20;this.headWidth=20;THREE.PinHelper.call(this,dir,origin,this.length,color,this.headLength,this.headWidth)};THREE.LargePinHelper.prototype=Object.assign(Object.create(THREE.PinHelper.prototype),{constructor:THREE.PinHelper});THREE.MidiumPinHelper=function(dir,origin,color){this.length=75;this.headLength=20;this.headWidth=20;THREE.PinHelper.call(this,dir,origin,this.length,color,this.headLength,this.headWidth)};THREE.MidiumPinHelper.prototype=Object.assign(Object.create(THREE.PinHelper.prototype),{constructor:THREE.PinHelper});THREE.SmallPinHelper=function(dir,origin,color){this.length=37;this.headLength=20;this.headWidth=20;THREE.PinHelper.call(this,dir,origin,this.length,color,this.headLength,this.headWidth)};THREE.SmallPinHelper.prototype=Object.assign(Object.create(THREE.PinHelper.prototype),{constructor:THREE.PinHelper});THREE.SuperSmallPinHelper=function(dir,origin,color){this.length=20;this.headLength=20;this.headWidth=20;THREE.PinHelper.call(this,dir,origin,this.length,color,this.headLength,this.headWidth)};THREE.SuperSmallPinHelper.prototype=Object.assign(Object.create(THREE.PinHelper.prototype),{constructor:THREE.PinHelper});THREE.ConeHelper=function(dir,origin,color,length){THREE.Object3D.call(this);this.type="ConeHelper";if(color===undefined){color=255}if(length===undefined){length=25}var lineRadius=25;this.lineHeight=2;var lineGeometry=new THREE.CylinderBufferGeometry(lineRadius,0.1,this.lineHeight,72,1);lineGeometry.translate(0,this.lineHeight/2,0);this.length=length;this.position.copy(origin);this.line=new THREE.Mesh(lineGeometry,new THREE.MeshLambertMaterial({color:color}));this.line.matrixAutoUpdate=false;this.add(this.line);this.setDirection(dir);this.setLength()};THREE.ConeHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ConeHelper.prototype.constructor=THREE.ConeHelper;THREE.ConeHelper.prototype.setDirection=(function(){var axis=new THREE.Vector3();var radians;return function setDirection(dir){if(dir.y>0.99999){this.quaternion.set(0,0,0,1)}else{if(dir.y<-0.99999){this.quaternion.set(1,0,0,0)}else{axis.set(dir.z,0,-dir.x).normalize();radians=Math.acos(dir.y);this.quaternion.setFromAxisAngle(axis,radians)}}}}());THREE.ConeHelper.prototype.setLength=function(length,scale){if(length===undefined){length=this.length}if(scale===undefined){scale=1}this.line.scale.set(scale,Math.max(0,length),scale);this.line.updateMatrix()};THREE.ConeHelper.prototype.setScale=function(scale){if(scale===undefined){scale=1}this.setLength(this.length*scale,scale)};THREE.ConeHelper.prototype.setColor=function(color){this.line.material.color.copy(color)};THREE.ConeHelper.prototype.setSize=function(length){this.length=length};THREE.CircleHelper=function(dir,origin,color,length){THREE.Object3D.call(this);this.type="CircleHelper";if(color===undefined){color=255}if(length===undefined){length=25}var coneRadius=0.5;var coneGeometry=new THREE.SphereBufferGeometry(coneRadius);this.length=length;this.position.copy(origin);this.cone=new THREE.Mesh(coneGeometry,new THREE.MeshLambertMaterial({color:color}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(dir);this.setLength()};THREE.CircleHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.CircleHelper.prototype.constructor=THREE.CircleHelper;THREE.CircleHelper.prototype.setDirection=(function(){var axis=new THREE.Vector3();var radians;return function setDirection(dir){if(dir.y>0.99999){this.quaternion.set(0,0,0,1)}else{if(dir.y<-0.99999){this.quaternion.set(1,0,0,0)}else{axis.set(dir.z,0,-dir.x).normalize();radians=Math.acos(dir.y);this.quaternion.setFromAxisAngle(axis,radians)}}}}());THREE.CircleHelper.prototype.setLength=function(length,scale){if(length===undefined){length=this.length}if(scale===undefined){scale=1}this.cone.scale.set(length,length,length);this.cone.updateMatrix()};THREE.CircleHelper.prototype.setScale=function(scale){if(scale===undefined){scale=1}this.setLength(this.length*scale,scale)};THREE.CircleHelper.prototype.setColor=function(color){this.cone.material.color.copy(color)};THREE.CircleHelper.prototype.setSize=function(length){this.length=length};THREE.OBJLoader.prototype.load=function(url,onLoad,onProgress,onError){var scope=this;this.__url=url;var loader=new THREE.FileLoader(scope.manager);loader.setPath(this.path);var request=loader.load(url,function(text){onLoad(scope.parse(text))},onProgress,onError);return request};