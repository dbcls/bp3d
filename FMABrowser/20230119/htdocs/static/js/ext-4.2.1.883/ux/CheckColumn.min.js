Ext.define("Ext.ux.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",stopSelection:true,tdCls:Ext.baseCSSPrefix+"grid-cell-checkcolumn",constructor:function(){this.addEvents("beforecheckchange","checkchange");this.callParent(arguments)},processEvent:function(type,view,cell,recordIndex,cellIndex,e,record,row){var me=this,key=type==="keydown"&&e.getKey(),mousedown=type=="mousedown";if(mousedown||(key==e.ENTER||key==e.SPACE)){var dataIndex=me.dataIndex,checked=!record.get(dataIndex);if(me.fireEvent("beforecheckchange",me,recordIndex,checked)!==false){record.set(dataIndex,checked);me.fireEvent("checkchange",me,recordIndex,checked,record);if(mousedown){e.stopEvent()}if(!me.stopSelection){view.selModel.selectByPosition({row:recordIndex,column:cellIndex})}return false}else{return !me.stopSelection}}else{return me.callParent(arguments)}},renderer:function(value){var cssPrefix=Ext.baseCSSPrefix,cls=[cssPrefix+"grid-checkheader"];if(value){cls.push(cssPrefix+"grid-checkheader-checked")}return'<div class="'+cls.join(" ")+'">&#160;</div>'}});